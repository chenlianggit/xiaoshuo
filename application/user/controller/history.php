<?php
class historyController extends CommonController{ public function indexAction() { $zym_6=M('user_mark'); $zym_9=$zym_6->gethistoryinfo(); $this->marklist=$zym_6->getmarklist($zym_9); $this->view->userpagesign='history'; $this->display('history'); } public function delAction() { $zym_6=M('user_mark'); if(isset($_GET['novelid'])){ $zym_7=[$this->input->get('novelid','int')]; }else{ $zym_7 = I('caseid', 'arr', array()); } $zym_10=$zym_6->gethistoryinfo(); foreach($zym_7 as $zym_8){ if (isset($zym_10[$zym_8])){ unset($zym_10[$zym_8]); } } $zym_6->setHistory($zym_10); $this->success('移除小说成功'); } public function clearAction() { $zym_6=M('user_mark'); $zym_6->setHistory([]); $this->success('清空书架成功'); } public function autopowerAction() { $zym_5=intval(cookie('nohistory')); cookie('nohistory',1-$zym_5); $this->success('设置成功'); } }
?>