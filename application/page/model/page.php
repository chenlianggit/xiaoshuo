<?php
 class PageModel extends Model { protected $imgext = array('jpg', 'png', 'gif', 'bmp', 'jpeg'); public function add($zym_8) { $zym_8['create_user_id']=$_SESSION['admin']['userid']; $zym_8['create_time']=NOW_TIME; $zym_10 = $this->insert($zym_8); return $zym_10; } public function edit($zym_8) { $zym_8['update_user_id']=$_SESSION['admin']['userid']; $zym_8['update_time']=NOW_TIME; $zym_10 = $this->update($zym_8); return $zym_10; } public function del($zym_9) { $zym_7 = $this->where($zym_9)->find(); if ($zym_7) { $zym_10 = $this->where($zym_9)->delete(); return $zym_10; } return false; } public function getlist() { $zym_5=(array)$this->select(); foreach($zym_5 as &$zym_6){ if (isset($zym_6['create_user_id'])){ $zym_6['create_username']=dc::get('user',$zym_6['create_user_id'],'name'); $zym_6['update_username']=dc::get('user',$zym_6['update_user_id'],'name'); $zym_6['url_edit']=U('page.manage.edit',array('id'=>$zym_6['id'])); $zym_6['create_time']=$zym_6['create_time']?date('Y-m-d H:i',$zym_6['create_time']):''; $zym_6['update_time']=$zym_6['update_time']?date('Y-m-d H:i',$zym_6['update_time']):''; unset($zym_6['content']); }else{ $zym_6['url']=U('page.index.detail',array('id'=>$zym_6['id'],'key'=>$zym_6['key'])); } } return $zym_5; } }
?>